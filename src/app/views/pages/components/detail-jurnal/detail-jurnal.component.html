<div class="p-container">
    <div style="display: flex; flex-direction: row; height: 38px; align-items: center; background-color: #1e1e2d;">
        <div style="width: 34%; padding: 10px; border-right: solid 1px lightgrey;" id="h-akun">
            <span class="title">Informasi Akun</span>
        </div>
        <div style="width: 28%; padding: 10px; border-right: solid 1px lightgrey;" id="h-debit">
            <span class="title">Keterangan</span>
        </div>
        <div style="width: 19%; padding: 10px; border-right: solid 1px lightgrey;" id="h-debit">
            <span class="title">Debit</span>
        </div>
        <div style="width: 19%; padding: 10px" id="h-kredit">
            <span class="title">Kredit</span>
        </div>
    </div>

    <div style="overflow-y: auto; width: 100%; height: calc(100% - 38px);" id="c-container">
        <div *ngFor="let x of res_data; let i = index"
            style="width: 100%; height: auto; display: flex; flex-direction: row; border-bottom: 1px solid lightgrey;"
            [id]="i == 0 ? 'content' : null">
            <div
                style="width: 34%; height: fit-content; padding: 10px; border-right: solid 1px lightgray; display: flex; flex-direction: column;">
                <div class="input-group">
                    <input class="form-control m-input" type="text" name="{{ 'akun-' + i }}"
                        (blur)="noEdit ? null : onBlur($event, i, 'kode_akun')"
                        (keyup.enter)="noEdit ? null : onBlur($event, i, 'kode_akun')"
                        (keyup.tab)="noEdit ? null : onBlur($event, i, 'kode_akun')"
                        [(ngModel)]="res_data[i]['keterangan_akun']" [readonly]="noEdit" placeholder="Pilih Akun">
                    <div class="input-group-append" *ngIf="!noEdit">
                        <button tabindex="-1" type="button" class="btn btn-primary btn-input-group"
                            (click)="openDialog(i, 'kode_akun')">
                            Pilih
                        </button>
                    </div>
                </div>
                <!-- <div
                    style="width: 100%; margin-top: 10px; display: flex; flex-direction: row; justify-content: space-between;"> -->
                    <div style="margin-top: 5px;">
                        <div class="input-group">
                            <input class="form-control m-input" type="text" name="{{ 'divisi-' + i }}"
                                (blur)="noEdit ? null : onBlur($event, i, 'kode_divisi')"
                                (keyup.enter)="noEdit ? null : onBlur($event, i, 'kode_divisi')"
                                (keyup.tab)="noEdit ? null : onBlur($event, i, 'kode_divisi')"
                                [(ngModel)]="res_data[i]['nama_divisi']" [readonly]="noEdit" placeholder="Pilih Divisi">
                            <div class="input-group-append" style="height: fit-content;" *ngIf="!noEdit">
                                <button tabindex="-1" type="button" class="btn btn-primary btn-input-group"
                                    (click)="openDialog(i, 'kode_divisi')">
                                    Pilih
                                </button>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 5px;">
                        <div class="input-group">
                            <input class="form-control m-input" type="text" name="{{ 'departemen-' + i }}"
                                (blur)="noEdit ? null : onBlur($event, i, 'kode_departemen')"
                                (keyup.enter)="noEdit ? null : onBlur($event, i, 'kode_departemen')"
                                (keyup.tab)="noEdit ? null : onBlur($event, i, 'kode_departemen')"
                                [(ngModel)]="res_data[i]['nama_departemen']" [readonly]="noEdit"
                                placeholder="Pilih Departemen">
                            <div class="input-group-append" style="height: fit-content;" *ngIf="!noEdit">
                                <button tabindex="-1" type="button" class="btn btn-primary btn-input-group"
                                    (click)="openDialog(i, 'kode_departemen')">
                                    Pilih
                                </button>
                            </div>
                        </div>
                    </div>   
                </div>
            <!-- </div> -->
            <div style="width: 28%; padding: 10px; border-right: solid 1px lightgrey;">
                <input class="form-control m-input" type="text" name="{{ 'keterangan-1-' + i }}"
                    placeholder="Keterangan 1" [(ngModel)]="res_data[i]['keterangan_1']" [readonly]="noEdit"
                    (blur)="ket(i, '1')" (keyup.enter)="ket(i, '1')" (keyup.tab)="ket(i, '1')">
                <div style="margin-top: 5px;">
                    <input class="form-control m-input" type="text" name="{{ 'keterangan-2-' + i }}"
                        placeholder="Keterangan 2" [(ngModel)]="res_data[i]['keterangan_2']" [readonly]="noEdit"
                        (blur)="ket(i, '2')" (keyup.enter)="ket(i, '2')" (keyup.tab)="ket(i, '2')">
                </div>
            </div>

            <!-- Begin: Jurnal Umum -->
            <div style="width: 19%; padding: 10px; border-right: solid 1px lightgrey" class="input-group"
                *ngIf="!jurnalOtomatis && !templateTransaksi">
                <div class="input-group-prepend" style="height: fit-content; display: table;">
                    <span class="input-group-text btn-input-group" id="basic-addon-left">Rp.</span>
                </div>
                <input class="form-control m-input number-align-right" type="text" name="{{ 'debit-' + i }}"
                    (blur)="countDebit(i)" (keyup.enter)="countDebit(i)" (keyup.tab)="countDebit(i)"
                    [(ngModel)]="res_data[i]['saldo_debit']" currencyMask [options]="currencyOptions"
                    [readonly]="noEdit" [disabled]="disabled[i]['debit']">
            </div>
            <div style="width: 19%; padding: 10px" class="input-group" *ngIf="!jurnalOtomatis && !templateTransaksi">
                <div class="input-group-prepend" style="height: fit-content; display: table;">
                    <span class="input-group-text btn-input-group" id="basic-addon-left">Rp.</span>
                </div>
                <input class="form-control m-input number-align-right" type="text" name="{{ 'kredit-' + i }}"
                    (blur)="countKredit(i)" (keyup.enter)="countKredit(i)" (keyup.tab)="countKredit(i)"
                    [(ngModel)]="res_data[i]['saldo_kredit']" currencyMask [options]="currencyOptions"
                    [readonly]="noEdit" [disabled]="disabled[i]['kredit']">
            </div>
            <!-- End: Jurnal Umum -->

            <!-- Begin: Template Transaksi -->
            <div style="width: 20%; padding: 10px; border-right: solid 1px lightgrey" class="input-group"
                *ngIf="templateTransaksi">
                <input class="form-control m-input number-align-right" type="text" name="{{ 'bDebit-' + i }}"
                    (blur)="countPercentDebit(i)" (keyup.enter)="countPercentDebit(i)"
                    (keyup.tab)="countPercentDebit(i)" [(ngModel)]="res_data[i]['bobot_debit']" currencyMask
                    [options]="currencyOptions" [readonly]="noEdit" [disabled]="noEdit">
                <div class="input-group-prepend" style="height: fit-content;">
                    <span class="input-group-text" id="basic-addon-left">%</span>
                </div>
            </div>
            <div style="width: 20%; padding: 10px" class="input-group" *ngIf="templateTransaksi">
                <input class="form-control m-input number-align-right" type="text" name="{{ 'bKredit-' + i }}"
                    (blur)="countPercentKredit(i)" (keyup.enter)="countPercentKredit(i)"
                    (keyup.tab)="countPercentKredit(i)" [(ngModel)]="res_data[i]['bobot_kredit']" currencyMask
                    [options]="currencyOptions" [readonly]="noEdit" [disabled]="noEdit">
                <div class="input-group-prepend" style="height: fit-content;">
                    <span class="input-group-text" id="basic-addon-left">%</span>
                </div>
            </div>
            <!-- End: Template Transaksi-->

            <!-- Begin: Jurnal Otomatis -->
            <div style="width: 20%; padding: 10px; border-right: solid 1px lightgrey; text-align: center;"
                *ngIf="jurnalOtomatis">
                <div class="input-group">
                    <input class="form-control m-input" type="text" name="{{ 'dsetting-' + i }}"
                        [(ngModel)]="res_data[i]['setting_debit']" placeholder="Sumber data" readonly>
                    <div class="input-group-append">
                        <button tabindex="-1" type="button" class="btn btn-primary"
                            (click)="openDialog(i, 'kode_setting', 'd')">
                            Pilih
                        </button>
                    </div>
                </div>
                <span style="cursor: pointer;" (click)="clearJurnalOtomatisData(i)">Hapus</span>
            </div>
            <div style="width: 20%; padding: 10px; text-align: center;" *ngIf="jurnalOtomatis">
                <div class="input-group">
                    <input class="form-control m-input" type="text" name="{{ 'ksetting-' + i }}"
                        [(ngModel)]="res_data[i]['setting_kredit']" placeholder="Sumber data" readonly>
                    <div class="input-group-append">
                        <button tabindex="-1" type="button" class="btn btn-primary"
                            (click)="openDialog(i, 'kode_setting', 'k')">
                            Pilih
                        </button>
                    </div>
                </div>
                <span style="cursor: pointer;" (click)="clearJurnalOtomatisData(i)">Hapus</span>
            </div>
        </div>
    </div>
    <!-- End: Jurnal Otomatis -->

    <div style="width: 100%; height: 26px; display: flex; flex-direction: row;" *ngIf="!noEdit">
        <div style="width: 60%; height: 100%;"></div>
        <div style="width: 20%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <div class="baris" style="display: flex; justify-content: center; align-items: center; cursor: pointer;"
                (click)="addRow()">
                <i class="flaticon2-add-square"></i>
                <span style="margin-left: 10px;" class="unselectable">Tambah Baris</span>
            </div>
        </div>
        <div style="width: 20%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <div class="baris" style="display: flex; justify-content: center; align-items: center; cursor: pointer;"
                (click)="deleteRow()">
                <i class="flaticon2-trash"></i>
                <span style="margin-left: 10px;" class="unselectable">Hapus Baris</span>
            </div>
        </div>
    </div>

</div>

<div style="width: 100%; height: 38px; display: flex; flex-direction: row; margin-top: 5px;"
    *ngIf="!loading && !jurnalOtomatis">
    <div style="width: 60%;"></div>
    <div style="width: 20%; padding: 10px; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start;"
        *ngIf="!templateTransaksi">
        <span>Total Debit :</span>
        <h6 style="align-self: flex-end;" [ngStyle]="{'color': total_debit != total_kredit ? 'red' : 'black'}">Rp
            {{ numberFormatter(total_debit, 2) }}</h6>
    </div>
    <div style="width: 20%; padding: 10px; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start;"
        *ngIf="templateTransaksi">
        <span>Total Bobot Debit :</span>
        <h6 style="align-self: flex-end;" [ngStyle]="{'color': total_debit != total_kredit ? 'red' : 'black'}">
            {{ numberFormatter(total_debit, 2) }} %</h6>
    </div>
    <div style="width: 20%; padding: 10px; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start;"
        *ngIf="!templateTransaksi">
        <span>Total Kredit :</span>
        <h6 style="align-self: flex-end;" [ngStyle]="{'color': total_debit != total_kredit ? 'red' : 'black'}">Rp
            {{ numberFormatter(total_kredit, 2) }}</h6>
    </div>
    <div style="width: 20%; padding: 10px; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start;"
        *ngIf="templateTransaksi">
        <span>Total Bobot Kredit :</span>
        <h6 style="align-self: flex-end;" [ngStyle]="{'color': total_debit != total_kredit ? 'red' : 'black'}">
            {{ numberFormatter(total_kredit, 2) }} %</h6>
    </div>
</div>